# Audio player


В данном задании необходимо создать и добавить на страницу аудио плеер подобного или какого-либо иного дизайна:

<img width="403" alt="Screenshot 2022-10-06 at 08 29 24" src="https://user-images.githubusercontent.com/70028254/194221990-e9de305b-22f0-42a4-bc18-be88eec0b00f.png">

Плеер состоит из:
- картинки/фотографии альбома, песни, мелодии или какого-либо связанной с тематикой мелодии или исполнителя фото. Фото рассполагается в верхней части плеера и занимает всю его ширину и высоту равную ширине;
- ниже картинки рассполагается панель с именем исполнителя и названием композиции. Название композиции имеет больший размер шрифта, чем имя исполнителя.
- права от панели с названием песни и именем исполнителя рассполагается кнопка `play` вида ▶. При нажатии на кнопку `play` начинает играть мелодия. В свою очередь после этого, преобразуется в кнопку `pause` с символом ⏸. При нажатии на `pause` воспроизведение композиции останавливается и кнопка опять принимает вид `play`. При нажатии на `play` в этот раз, композиция воспроизводится с места где была остановлена;
- ниже рассполагается дорожка трека, а над ней слева - текущее время воспроизведения композиции, справа - полное время композиции. Дорожка так же визуально показывает сколько воспроизвелось, а сколько осталось;
- ниже рассполагается кнопка громкости, которая состоит из иконки динамика и ползунка для регулирования громкости. При нажатии на иконку динамика - звук отключается и иконка принимает вид зачеркнутого динамика. При повторном нажатии иконка возращается к первоначальному виду, а громкость становится равной такой же как перед отключением. Ползунок регулировки громкости позволяет изменять громкость в пределах 0 - 100. 

### Рекомендации по выполнению

‼ Писать js-код плеера будем в отдельном js-файле, назовем его `player.js` (html остается тем же). Так как плеер по сути своей является независимым от всего приложения компонентом, то лучше выделять всю его логику в отдельном файле, называемом модулем. Таким образом, мы создаем более чистую кодовую базу, где каждая сущность выделена в отдельный независимый модуль и позже все эти модули могут быть использованы в разных местах. Таким образом все что касается плеера у тебя будет храниться отдельно и никакой другой код не будет тебя путать и отвлекать от работы с плеером.
Так же для плеера можно создать и новый ccs-файл.

##### Перво на перво, необходимо создать html-верстку плеера в html-файле.
##### Создать, если нет, папку для хранения картинок и музыки `assets`, в ней создать папки `sounds` и `pictures`. Поместить в `sounds` композицию в mp3-формате, а в `pictures` картинку, соответсвтующую это композиции. Переименую эти файлы, чтоб было удобно к ним обращаться.

#### Немного теории: Работа с аудио в html

С появлением HTML5 добавление аудиоплеера на страницу превратилось в рядовую задачу. Для этого достаточно в html-файл добавить код плеера, и в атрибуте `src` указать ссылку на аудио-файл.
```html
<audio src="" controls></audio>
```
[Пример 1 на codepen](https://codepen.io/irinainina/pen/poerqar)

Внешний вид встроенного в браузер аудиоплеера в разных браузерах выглядит немного по-разному и очень плохо стилизуется. Если нужно создать плеер с определённым дизайном, в приведённом выше коде необходимо убрать атрибут `controls`, который отвечает за отображение плеера и написать js-код для его проигрывания:
```js
const audio = document.querySelector('audio');
function playAudio() {
  audio.currentTime = 0;
  audio.play();
}
function pauseAudio() {
  audio.pause();
}
```
[Пример 2 на codepen](https://codepen.io/irinainina/pen/RwoKVBW)

Функции `playAudio()` и `pauseAudio()` достаточно простые. Первая запускает проигрывание плеера используя метод `play()`, вторая - останавливает проигрывание, используя метод `pause()`. Строка `audio.currentTime = 0` указывает, что аудиотрек при каждом запуске функции `playAudio()` будет проигрываться с начала.

Есть возможность создать плеер средствами JavaScript(‼предпочтительный способ в данном задании‼). Причем даже совсем не надо добавлять тег `audio` в html-файл. Добавление возможности слышать и воспроизводить звуки на странице происходит из-за создания экземпляра js-класса `new Audio()` :
```js
const audio = new Audio();
function playAudio() {
  audio.src = // ссылка на аудио-файл;
  audio.currentTime = 0;
  audio.play();
}
```
[Пример 3 на codepen](https://codepen.io/irinainina/pen/dyvzrNV)

#### Вернемся к практике
У нас есть `player.js` файл где мы будем писать код для плеера.
И так, найдем необходимые на первом этапе html-элементы при помощи `document.querySelector`. Необходимые элементы - это **картинка** и **кнопка play/pause**.
Положим их в константы `soundImage` и `playButton`.
```js
const soundImage = document.querySelector('.sound_image');
const playButton = document.querySelector('.play_button');
```
Далее создаем браузерный внутренний объект аудио, который имеет методы для воспроизведения и остановки аудиозаписей.
```js
const audio = new Audio();
```
Теперь переменная `audio` содержит сслыку на некий внутренний браузерный объект плеера, невидимый на странице браузера, с которым мы можем работать.
Далее, скажем этому объекту `audio` что нужно воспроизводить и заодно отобразим картинку для этой мелодии:
```js
audio.src = 'здесь должны быть ссылка на мелодию, которая находится в папке `assets/sounds/`';
soundImage.src = 'здесь должны быть ссылка на картинку, которая находится в папке `assets/pictures/`';
```

Теперь, нам надо воспроизвести мелодию. Согласно требованиям, при нажатии на кнопку `play` композиция должна воспроизвестись, а сама кнопка преобразоваться в кнопку `pause`.
В первую очередь нам понадобиться глобальная переменная, которая будет флагом и назовем ее `isPlay`. Смысл этой переменной в том, чтоб хранить в ней состояние нашего аудиоплеера - играет или на паузе.
Флаги принмают как правило только булевые значения: true или false. Т.к. изначально наш плеер не воспроизводит композицию, то флаг будет иметь значение `false`.
```js
let isPlay = false
```
Далее переходим к логике воспроизведения. Мелодия должны воспроизводиться, когда происходит нажатие на кнопку `play`. Навесим листенер на эту кнопку:
```js
playButton.addEventListener('click', playPauseSound)
```
`playPauseSound` - это функция, которая будет заниматься воспроизведением и постановкой аудио на паузу в зависимости от флага `isPlay`.

```js 
const playPauseSound = () => {
  if (isPlay) {
    audio.pause();
    playButton.textContent = '⏸';
  } else {
    audio.play();
    playButton.textContent = '▶'
  }
  isPlay = !isPlay
}
```
`isPlay = !isPlay` изменяет значение `isPlay` на противоположное, когда мы нажимаем на кнопку `play/pause`, чтоб изменялся статус нашего плеера (игарет или на паузе) и функция `playPauseSound` корректно работала.
Теперь при каждом нажатии на кнопку у нас будет либо воспроизводиться либо останавливаться композиция.
Если необходимо по-разному стилизовать кнопку `play` в зависимости от состояния, то можно использовать css-стили и методы  `classList`(c `classList` ты немного знакома)
Метод `classList` предназначен для работы с классами и поддерживается всеми современными браузерами:
- `element.classList.add('class');` - добавляет элементу класс;
- `element.classList.remove('class');` - удаляет класс;
- `element.classList.toggle('class');` - переключает класс: добавляет, если класса нет, и удаляет, если он есть.
Где 'element' - это твой `html` элемент, которому нужно добавить/удалить классы (`playButton` в данном конкретном случае).
  
Далее необходимо найти элементы, которые будут отображать имя исполнителя и название композиции, при помощи `querySelector` и добавить в них необходимый текстовый контент.
```js
const atristName = document.querySelector('.artist');
const soundName = document.querySelector('.sound_name');

artistName.textContent = 'Юлия Александровна';
soundName.textContent = 'Я по уши в тебя влюблен!'
```
Базовая модель плеера у нас готова.

##### Регулятор громкости

Следующим шагом, добавим регулятор громкости в плеер.
Для этого в верстку добавим кнопку для отключения громкости и включения на тот же уровень, что была громкость прежде. Делается это по аналогичному принципу описанному для `play/pause` кнопки:
1) добавить элемент кнопки (в данном случае это элемент `input type="button"`)
2) стилизовать его
3) найти этот элемент при помощи `querySelector`
4) навесить листенер
```js
volumeSwitchButton.addEventListener('click', switchVolume)
```
Функия `switchVolume` будет проверять уровень звука и если звук больше 0, то выключит его, если равен нулю, то установит его уровень на 100%.
```js
const switchVolume = () => {
    if (audio.volume === 0) {
        audio.volume = 1;
        switch_volume.value = '🔊'
    } else {
        audio.volume = 0;
        switch_volume.value = '🔇'
    }
}
```

Далее добавим регулятор громкости. В html для "ползунков" применяется элемент `input type="range".
Немного теории о [ползунках(😁)](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/range#:~:text=The%20range%20input%20type%20lets,and%20balance%2C%20or%20filter%20controls).
**Необходимо продумать какие аттрибуты и с какими значениями нам необходимы для корректной и красивой работы ползунка.**
Добавим этот элемент в наш верстку и стилизуем согласно дизайну ([несколько примеров стилизации при помощи CSS](https://freefrontend.com/css-range-sliders/)).
Далее находим элемент регулировки в js-файле, с помощью `querySelector` и навешиваем на него листенер, который будет вызываться каждый раз, когда мы перетаскиваем ползунок.
```js
volumeAdjustingRange.addEventListener('input', adjustVolume)
```
Функция `adjustVolume, как говорит ее название, будет регулировать громкость в зависимости от значения ползунка.
```js
const adjustVolume = (e) => {
    const currentVolumeValue = e.target.value
    audio.volume = +currentVolumeValue/100
}
```
В этот раз нам понадобится информация об ивенте и о элементе на котором был вызван этот ивент, поэтому в агрументах функции промишем переменную `e`, которая будт автоматически к нам приходить из `addEventListener`. Как видно из кода, через `e` мы обращаемся к элементу ползунка (`target`, который будет ссылаться на наш `input type="range"` элемент) и берем из этого элемента его текущее значение (`value`). Далее присваиваем это значение свойству `value` нашего объекту `audio`. (**Примечание:** в данном случае это значение делилось на 100, т.к. я не задавал ползунку в аттрибутах границы в которых ему можно изменяться, ты же можешь добавить, чтоб он изменялся в пределах 0 - 1, тогда делить на 100 нет необходимости.)


